# รายงานรางวัล (Reward Report)

หน้ารายงานรางวัลที่แสดงข้อมูลสถิติการใช้งานตู้กาชาและประวัติการสุ่มรางวัล

## ฟีเจอร์

### 1. สรุปสถิติรวม
- **Token ที่ใช้ไปแล้ว**: แสดงจำนวน Token ทั้งหมดที่ใช้ในการสุ่มตู้กาชา
- **จำนวนครั้งที่สุ่ม**: แสดงจำนวนครั้งทั้งหมดที่มีการสุ่มตู้กาชา
- **Xeny ที่แจกไปแล้ว**: แสดงจำนวน Xeny ทั้งหมดที่แจกเป็นรางวัล

### 2. สถิติการสุ่มของแต่ละ Character
แสดงข้อมูลสถิติการสุ่มของแต่ละ Character รวมถึง:
- ชื่อ Character และ User
- อาชีพและระดับ
- จำนวนครั้งที่สุ่ม
- จำนวนครั้งที่ได้รางวัล
- อัตราได้รางวัล (%)
- Token ที่ใช้ไป
- วันที่สุ่มครั้งล่าสุด

### 3. ประวัติการสุ่มตู้กาชา
แสดงรายละเอียดการสุ่มแต่ละครั้ง:
- วันที่และเวลา
- Character ที่สุ่ม
- รางวัลที่ได้รับ (ถ้ามี)
- มูลค่ารางวัล
- Token ที่ใช้

## การใช้งาน

### การเข้าถึง
1. ไปที่เมนู "รายงาน" ในแอปพลิเคชัน
2. คลิกที่ "รางวัล" เพื่อเข้าสู่หน้ารายงาน

### การกรองข้อมูล
- **กรองตาม Character**: เลือก Character เฉพาะหรือดูทั้งหมด
- **ค้นหา**: ค้นหาจากชื่อ Character, User, ชื่อรางวัล, หรือหมวดหมู่รางวัล
- **กรองตามวันที่**: เลือกช่วงวันที่เพื่อดูประวัติการสุ่มเฉพาะช่วงเวลาที่ต้องการ

### การแบ่งหน้า (Pagination)
- ประวัติการสุ่มตู้กาชาแสดง 10 รายการต่อหน้า
- สามารถเปลี่ยนหน้าได้โดยใช้ปุ่ม pagination
- แสดงจำนวนรายการทั้งหมด
- หน้าแรกจะถูก reset เมื่อเปลี่ยน filter

### การรีเฟรชข้อมูล
คลิกปุ่ม "รีเฟรชข้อมูล" เพื่อดึงข้อมูลล่าสุดจากฐานข้อมูล

## โครงสร้างฐานข้อมูล

### Models ที่เกี่ยวข้อง
- `GachaHistory`: ประวัติการสุ่มตู้กาชา
- `RewardItem`: รายการรางวัล
- `UserRewardStats`: สถิติรางวัลของผู้ใช้
- `Character`: ข้อมูล Character
- `User`: ข้อมูลผู้ใช้

### API Endpoint
- `GET /api/reports/rewards`: ดึงข้อมูลรายงานรางวัล

## การติดตั้ง

1. ตรวจสอบว่า Prisma schema มี models ที่จำเป็นครบถ้วน
2. รัน `npx prisma generate` เพื่อ generate Prisma client
3. ตรวจสอบว่า navigation config มีลิงก์ไปยังหน้ารายงาน

## การปรับแต่ง

### เพิ่มฟีเจอร์ใหม่
1. แก้ไข API endpoint ใน `src/app/api/reports/rewards/route.ts`
2. อัปเดต interface `RewardReportData` ในหน้า component
3. เพิ่ม UI elements ตามต้องการ

### ปรับแต่งการแสดงผล
- แก้ไข CSS classes ใน component
- ปรับแต่งการแสดงผล Xeny ที่ได้
- เพิ่มการแสดงผลข้อมูลเพิ่มเติม

## หมายเหตุ

- หน้านี้ใช้ dayjs สำหรับการจัดการวันที่
- ข้อมูลจะถูกดึงจากฐานข้อมูลแบบ real-time
- การแสดงผลรองรับภาษาไทย
- มีการจัดการ error states และ loading states 